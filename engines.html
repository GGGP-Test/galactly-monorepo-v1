<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Galactly — AI Engines</title>
  <link rel="stylesheet" href="./style.css"/>
  <script>window.API_BASE = window.API_BASE || ''; window.PRICE_ID = window.PRICE_ID || 'price_test_123';</script>
  <script defer src="./api-base.js"></script>
  <style>
    .wrap{max-width:980px;margin:40px auto;padding:0 20px}
    .grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(260px,1fr));gap:14px}
    .card{border:1px solid var(--stroke);border-radius:16px;padding:18px;background:rgba(255,255,255,.03)}
    .h{font:800 24px var(--mont);margin:0 0 8px}
    .muted{opacity:.75}
    .badge{display:inline-block;border:1px solid var(--stroke);border-radius:999px;padding:4px 8px;margin-left:8px}
    .ok{color:#8dffa7}
  </style>
</head>
<body>
  <header class="nav">
    <a class="brand" href="./"><b>Galactly</b></a>
    <nav class="row">
      <a class="btn" href="./free-panel.html">Live Leads</a>
    </nav>
  </header>

  <main class="wrap">
    <h1 class="h">AI Engines</h1>
    <p class="muted">Automation packs that turn live signals into first touches, replies, and quote drafts.</p>

    <div class="grid" style="margin:16px 0">
      <div class="card">
        <div class="h">Money Maker <span class="badge">Drafts • CRM • Follow-ups</span></div>
        <p class="muted">First touch + 2 follow-ups, CRM/CSV export, and fast lane in the feed.</p>
        <button class="btn primary" onclick="goPro()">Go Pro — Enable Fast-Lane</button>
      </div>
      <div class="card">
        <div class="h">Money Saver <span class="badge">Reply Assist • Triage</span></div>
        <p class="muted">Reply suggestions, summarization, and task routing into your ops flow.</p>
        <button class="btn" onclick="goPro()">Enable with Pro</button>
      </div>
    </div>

    <div id="msg" class="muted"></div>
  </main>

  <script>
    async function goPro(){
      const priceId = window.PRICE_ID; // set this on page load or via env injection
      document.getElementById('msg').textContent = 'Opening Stripe Checkout…';
      try{
        const r = await fetch((window.API_BASE||'') + '/api/v1/billing/create-checkout-session', {
          method:'POST',
          headers:{'Content-Type':'application/json'},
          body: JSON.stringify({ priceId, mode:'subscription' })
        });
        const d = await r.json();
        if(d.url){ location.href = d.url; }
        else { document.getElementById('msg').textContent = 'Failed: ' + (d.error||'Unknown'); }
      }catch(e){
        document.getElementById('msg').textContent = 'Failed: ' + (e.message||e);
      }
    }
  </script>
</body>
</html>
