<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Galactly — Live Packaging Leads</title>
  <link rel="preconnect" href="https://fonts.googleapis.com"/>
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Montserrat:wght@700;800&display=swap" rel="stylesheet"/>
  <link rel="stylesheet" href="./style.css"/>
  <script defer src="./api-base.js"></script>
  <style>
    /* Extra sugar for this page only */
    .grid{display:grid;gap:14px}
    @media(min-width:900px){.grid.cols-3{grid-template-columns:repeat(3,1fr)}}
    .card{border:1px solid var(--stroke);border-radius:14px;padding:14px;background:rgba(255,255,255,.03)}
    .muted{opacity:.8}
    .pill{border:1px solid var(--stroke);border-radius:999px;padding:4px 10px;font-size:12px}
    .section{max-width:1100px;margin:40px auto;padding:0 20px}
    .h2{font:800 28px var(--mont);margin:0 0 10px}
    .lead-item{display:flex;justify-content:space-between;gap:8px;align-items:center}
    .sources{display:flex;gap:8px;flex-wrap:wrap}
    .sources .pill{background:rgba(255,255,255,.06)}
  </style>
</head>
<body>
  <header class="nav">
    <a class="brand" href="#"><b>Galactly</b></a>
    <nav>
      <a class="btn" href="./free-panel.html">Free Live Leads</a>
    </nav>
  </header>

  <section class="hero" style="padding-bottom:0">
    <h1>Live Leads &lt;30s</h1>
    <p>US &amp; Canada buyers asking for packaging <em>right now</em>. Free forever. Automation &amp; integrations are paid.</p>
    <div class="cta"><a href="./free-panel.html" class="btn primary">Open the Live Feed</a></div>
    <p class="muted" id="hero-online" style="margin:14px 0 0">Humans online: —</p>
  </section>

  <!-- LIVE PREVIEW -->
  <section class="section" id="preview">
    <div class="h2">Fresh leads (live preview)</div>
    <div id="previewList" class="grid cols-3"></div>
    <div style="margin-top:10px"><a class="btn" href="./free-panel.html">See full feed</a></div>
  </section>

  <!-- HOW IT WORKS -->
  <section class="section">
    <div class="h2">How it works</div>
    <div class="grid cols-3">
      <div class="card">
        <b>1) We listen</b>
        <p class="muted">Official RFPs (SAM.gov), public forums (Reddit), and procurement RSS. Only ToS-compliant, public data.</p>
      </div>
      <div class="card">
        <b>2) We classify</b>
        <p class="muted">Corrugated, Flexible, Labels, Crating… plus keywords like “stand-up pouch”, “mailer box”, “GHS label”.</p>
      </div>
      <div class="card">
        <b>3) You claim</b>
        <p class="muted">Press & hold to get a 60s head-start. Own within 5 minutes or it returns to the pool. Fair-Play keeps it clean.</p>
      </div>
    </div>
  </section>

  <!-- SOURCES -->
  <section class="section">
    <div class="h2">Live sources</div>
    <div class="sources">
      <span class="pill">SAM.gov (US Federal)</span>
      <span class="pill">State/City RSS</span>
      <span class="pill">Reddit (public)</span>
      <span class="pill">Company news RSS</span>
      <span class="pill">More soon (CanadaBuys/MERX)</span>
    </div>
    <p class="muted" style="margin-top:8px">We only use public, legal endpoints. No scraping of restricted sites.</p>
  </section>

  <!-- TRUST / FAIR-PLAY -->
  <section class="section">
    <div class="h2">Why sellers like it</div>
    <div class="grid cols-3">
      <div class="card"><b>Free forever</b><p class="muted">Real leads without paying. Pay only for automations and integrations when you’re ready.</p></div>
      <div class="card"><b>Fair-Play</b><p class="muted">Reputation & cooldowns stop bots and hoarding. “Why this lead?” explains recommendations.</p></div>
      <div class="card"><b>Push alerts</b><p class="muted">Browser push (free) for instant claims. Email/Slack/Telegram can be added later.</p></div>
    </div>
  </section>

  <footer class="foot">© 2025 Galactly — Transfusion AI</footer>

  <script>
  // A tiny “user” identity so backend personalizes & counts presence
  const uid = localStorage.getItem('uid') || ('u-'+Math.random().toString(36).slice(2));
  localStorage.setItem('uid', uid);

  async function loadPreview(){
    try{
      const r = await fetch(`/api/v1/leads?region=US&fitMin=75&userId=${uid}`);
      const d = await r.json();
      document.getElementById('hero-online').textContent = 'Humans online: '+(d.humansOnline ?? '—');

      const list = document.getElementById('previewList');
      list.innerHTML = '';
      (d.leads||[]).slice(0,3).forEach(L=>{
        const el = document.createElement('div');
        el.className = 'card';
        el.innerHTML = `
          <div class="lead-item">
            <div>
              <div><b>${escapeHtml(L.kw)}</b> • ${escapeHtml(L.cat)} • ${escapeHtml(L.platform)}</div>
              <div class="muted">Fit ${L.fit} · ${Math.max(1,Math.round(L.age/60))} min ago</div>
            </div>
            <a class="btn" href="./free-panel.html">Claim</a>
          </div>`;
        list.appendChild(el);
      });
    }catch(e){ /* ignore */ }
  }

  function escapeHtml(s){return String(s).replace(/[&<>"']/g, m=>({ '&':'&amp;','<':'&lt;','>':'&gt;','"':'&quot;',"'":'&#39;' }[m]))}

  loadPreview();
  setInterval(loadPreview, 5000);
  </script>
</body>
</html>
