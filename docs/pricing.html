<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Galactly — Pricing</title>
<style>
  :root{
    --bg:#0b0f14; --panel:#121822; --card:#0f1724; --divider:#1b2531;
    --text:#e9f1f7; --muted:#8aa0b2; --accent:#6de1ff; --accentText:#082433;
    --good:#38e08f; --warn:#ffd166;
  }
  *{box-sizing:border-box}
  html,body{margin:0;background:var(--bg);color:var(--text);font:16px/1.5 system-ui,Segoe UI,Inter,Arial}
  a{color:inherit}
  .wrap{max-width:1100px;margin:28px auto;padding:0 18px}
  .top{display:flex;align-items:center;gap:10px;margin-bottom:14px}
  .sep{flex:1}
  .pill{padding:6px 10px;border-radius:999px;background:#0d1a26;color:#8fb0c6;font-size:12px}
  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px}
  @media (max-width:900px){ .grid{grid-template-columns:1fr} }
  .card{background:var(--panel);border:1px solid var(--divider);border-radius:16px;padding:16px}
  .h{font-weight:800;font-size:20px;margin:0 0 6px}
  .price{font-size:34px;font-weight:900;margin:2px 0 12px}
  .feat{display:flex;align-items:center;gap:8px;margin:8px 0;color:#cfe0ee}
  .feat .dot{width:8px;height:8px;border-radius:50%;background:var(--good)}
  .muted{color:var(--muted)}
  .btn{display:inline-flex;align-items:center;gap:.6rem;padding:12px 16px;border-radius:12px;border:1px solid var(--divider);
       background:#152333;color:#cfe0ee;cursor:pointer}
  .btn.primary{background:var(--accent);border:none;color:var(--accentText);font-weight:800}
  .row{display:flex;gap:10px;align-items:center;margin-top:10px}
  .note{font-size:12px;color:var(--muted);margin-top:8px}
  .gear{background:transparent;border:1px solid var(--divider);color:#9bb2c6;border-radius:10px;padding:6px 8px}
  input[type=text]{width:100%;padding:10px 12px;border-radius:12px;border:1px solid var(--divider);background:#0d1520;color:var(--text)}
</style>
</head>
<body>
<div class="wrap">
  <div class="top">
    <div style="font-weight:900">Galactly • Plans</div>
    <span id="apiBadge" class="pill">API: not set</span>
    <span class="sep"></span>
    <button id="setApi" class="gear">⚙️ API</button>
  </div>

  <div class="card" style="margin-bottom:16px">
    <div class="row" style="gap:8px;align-items:center">
      <div class="muted">Optional email (for receipt association):</div>
      <input id="email" type="text" placeholder="you@company.com" style="max-width:280px">
      <button id="saveEmail" class="btn">Save</button>
    </div>
    <div class="note">We pass your email as metadata to Stripe so the session links back to your account.</div>
  </div>

  <div class="grid">
    <!-- PRO -->
    <div class="card">
      <div class="h">Pro</div>
      <div class="muted">Unlock warm + hot leads in the app. Higher daily limits.</div>
      <div class="price">$<span style="font-variant-numeric:tabular-nums">99</span> / mo</div>
      <div class="feat"><span class="dot"></span> HOT leads visible (no blur)</div>
      <div class="feat"><span class="dot"></span> Daily finds ↑ (5× free)</div>
      <div class="feat"><span class="dot"></span> “Don’t show to competitors” toggle (per-lead)</div>
      <div class="feat"><span class="dot"></span> Priority crawling</div>
      <div class="row">
        <button id="buyPro" class="btn primary">Upgrade to Pro</button>
        <button id="tryPro" class="btn">Try with demo host</button>
      </div>
      <div id="proMsg" class="note"></div>
    </div>

    <!-- VIP / Bundle -->
    <div class="card">
      <div class="h">VIP (Bundle)</div>
      <div class="muted">Hands-off. We email you CSVs daily. First in line for HOT.</div>
      <div class="price">$<span style="font-variant-numeric:tabular-nums">399</span> / mo</div>
      <div class="feat"><span class="dot"></span> Automated daily CSV to your inbox</div>
      <div class="feat"><span class="dot"></span> HOT leads delivered first</div>
      <div class="feat"><span class="dot"></span> Competitor suppression on saved leads</div>
      <div class="feat"><span class="dot"></span> White-glove tuning</div>
      <div class="row">
        <button id="buyVip" class="btn primary">Upgrade to VIP</button>
        <button id="tryVip" class="btn">See sample CSV</button>
      </div>
      <div id="vipMsg" class="note"></div>
    </div>
  </div>

  <div id="status" class="note" style="margin-top:16px"></div>
</div>

<script>
(function(){
  // ----- tiny storage + api base helpers -----
  function getStored(k,d=""){ try{ const v=localStorage.getItem(k); return v===null? d: v; }catch{ return d; } }
  function setStored(k,v){ try{ localStorage.setItem(k,v); }catch{} }
  function normalizeApiBase(input){
    let b=(input||"").trim().replace(/\/+$/,"");
    const m=b.match(/^(.*?)(?:\/api(?:\/.*)?)$/i); if(m) b=m[1];
    return b ? (b + "/api") : (window.location.origin + "/api");
  }
  const API = {
    get(){ const raw=getStored("apiBase","") || (window.API_BASE||""); return normalizeApiBase(raw); },
    headers(){
      const h={"Content-Type":"application/json"};
      const email = getStored("fp.user.email",""); if (email) h["x-user-email"]=email;
      return h;
    }
  };
  const apiBadge = document.getElementById("apiBadge");
  function updBadge(){ const b=API.get(); apiBadge.textContent = "API: " + b.replace(/^https?:\/\//,""); }

  // ----- wire inputs -----
  document.getElementById("setApi").addEventListener("click", ()=>{
    const cur = getStored("apiBase","");
    const v = prompt("API base (root or /api):", cur || "");
    if (v!=null){ setStored("apiBase", v); updBadge(); }
  });
  document.getElementById("saveEmail").addEventListener("click", ()=>{
    const v = document.getElementById("email").value.trim();
    if (v){ setStored("fp.user.email", v); document.getElementById("status").textContent = "Email saved."; }
  });

  // ----- checkout helper -----
  async function go(plan, msgEl){
    msgEl.textContent = "Starting checkout…";
    const base = API.get();
    try{
      const r = await fetch(base + "/v1/onboard/checkout", {
        method:"POST",
        headers: API.headers(),
        body: JSON.stringify({ plan })
      });
      const t = await r.text();
      let d; try{ d = JSON.parse(t); }catch{ d = { ok:false, error:"bad_json", raw:t }; }
      if (d && d.ok && d.url){ window.location.href = d.url; return; }
      msgEl.textContent = "Checkout failed: " + (d?.error || r.status);
    }catch(e){ msgEl.textContent = "Network error."; }
  }

  document.getElementById("buyPro").addEventListener("click", ()=> go("pro",  document.getElementById("proMsg")));
  document.getElementById("buyVip").addEventListener("click", ()=> go("vip",  document.getElementById("vipMsg")));

  // demo buttons (non-purchase)
  document.getElementById("tryPro").addEventListener("click", ()=>{
    window.location.href = "free-panel.html";
  });
  document.getElementById("tryVip").addEventListener("click", ()=>{
    alert("We’ll drop a sample CSV generator in BV1. For now, VIP includes daily CSV delivery and competitor suppression.");
  });

  // boot
  updBadge();
  const savedEmail = getStored("fp.user.email",""); if (savedEmail) document.getElementById("email").value = savedEmail;
})();
</script>
</body>
</html>