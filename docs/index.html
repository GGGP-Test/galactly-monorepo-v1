<!doctype html>
<html lang="en" class="no-js">
<head>
<meta charset="utf-8"/>
<meta name="viewport" content="width=device-width,initial-scale=1"/>
<title>Galactly — Find real packaging buyers</title>
<meta name="description" content="Galactly helps packaging suppliers find qualified B2B buyers. Turn website and market signals into ranked leads to grow your sales pipeline—no cold spam.">

<!-- Fonts -->
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&family=Newsreader:wght@600&family=Plus+Jakarta+Sans:wght@400;600;700;800&display=swap" rel="stylesheet">

<link rel="icon" href="data:,">

<style>
  :root{
    --bg:#0a0e14; --text:#e9f1f7; --muted:#9fb3c7; --stroke:#1b2531;
    --gold:#e6c36b; --gold-300:#f2dca0; --gold-700:#b8913d; --ctaText:#1b1405;
    --container-max: clamp(1100px, 86vw, 1320px);
    --gutter: clamp(16px,4vw,40px);
    --panel:#0f1521; --panel-2:#0b111a;
  }

  *{box-sizing:border-box}
  html,body{margin:0;height:100%;background:var(--bg);color:var(--text);
    font:16px/1.55 Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;}
  a{color:inherit;text-decoration:none}

  /* Fallback when JS fails: show content, hide effects */
  html.no-js .reveal{opacity:1 !important; transform:none !important}
  html.no-js .viz-canvas, html.no-js .viz-svg{display:none !important}

  /* Header */
  .site-header{position:fixed; inset:0 0 auto 0; height:60px; z-index:50; display:grid; place-items:center;
    background:rgba(12,18,28,.38); backdrop-filter:blur(12px) saturate(140%);
    border-bottom:1px solid rgba(255,255,255,.06)}
  .site-header .inner{max-width:var(--container-max); width:100%; margin-inline:auto; padding:0 var(--gutter);
    display:grid; grid-template-columns:auto 1fr auto; align-items:center; gap:12px}
  .brand{display:flex; align-items:center; gap:10px}
  .brand-badge{width:28px;height:28px;border-radius:8px;background:linear-gradient(180deg,var(--gold),var(--gold-700));
    box-shadow:0 0 0 1px rgba(255,255,255,.08) inset; display:grid; place-items:center; color:#1b1405; font-weight:800; font-size:14px}
  nav{display:flex; gap:22px}
  .nav-link{position:relative; padding:8px 2px; font-weight:600; color:#cfe0ee; opacity:.92}
  .nav-link::after{content:""; position:absolute; left:50%; bottom:4px; height:1px; width:0;
    background:linear-gradient(90deg,var(--gold-300),var(--gold-700)); transform:translateX(-50%); transition:width .18s}
  .nav-link:hover::after{width:60%}
  .nav-actions{display:flex; align-items:center; gap:12px}
  .nav-demo{display:inline-block; padding:8px 12px; border-radius:999px; border:1px solid var(--stroke);
    background:rgba(255,255,255,.02); color:#cfe0ee; font-weight:600; opacity:.9}
  .nav-cta{padding:8px 14px; border-radius:999px; color:var(--ctaText);
    background:linear-gradient(180deg,var(--gold),var(--gold-700)); border:none;
    box-shadow:0 6px 18px rgba(230,195,107,.15), 0 0 0 1px rgba(255,255,255,.06) inset; white-space:nowrap}
  .nav-login{font-weight:600; color:#cfe0ee; opacity:.85}

  /* Hero */
  .hero{position:relative; min-height:100svh; display:flex; align-items:center; justify-content:center;
    padding:calc(60px + 40px) var(--gutter) 64px; overflow:visible; z-index:1;}
  .hero .inner{max-width:var(--container-max); width:100%; margin:0 auto;
    display:grid; grid-template-columns:1.02fr .98fr; gap:clamp(24px,4vw,46px); align-items:center;}
  @media (max-width:980px){ .hero .inner{grid-template-columns:1fr; gap:24px} }

  .hero-copy{max-width:720px}
  .badge{display:inline-block; margin-bottom:12px; padding:6px 10px; border-radius:999px;
    border:1px solid rgba(255,255,255,.10); background:rgba(255,255,255,.03); color:#9fb3c7; font-size:12px}
  h1{font:600 clamp(36px,6vw,66px) "Newsreader", Georgia, serif; letter-spacing:.2px; margin:0 0 12px}
  .lead{color:#c7d7e6; font-size:clamp(16px,2.3vw,19px); margin:0 0 24px}
  .glass-cta{display:flex; align-items:center; gap:10px; width:min(620px, 100%);
    padding:6px; border-radius:999px; background:linear-gradient(180deg, rgba(255,255,255,.10), rgba(255,255,255,.06));
    border:1px solid rgba(255,255,255,.10); backdrop-filter: blur(10px) saturate(140%);
    box-shadow:0 12px 26px rgba(0,0,0,.22), inset 0 1px 0 rgba(255,255,255,.06);}
  .glass-input{flex:1; min-width:240px; padding:14px 16px; border-radius:999px; border:0; outline:none; background:transparent; color:var(--text);}
  .glass-input::placeholder{color:#9fb3c7; opacity:.95}
  .btn{display:inline-flex; align-items:center; gap:.6rem; padding:12px 18px; border-radius:999px; border:1px solid var(--stroke); cursor:pointer}
  .btn.primary{color:var(--ctaText); background:linear-gradient(180deg,var(--gold),var(--gold-700)); border:none; box-shadow:0 10px 30px rgba(230,195,107,.15),0 0 0 1px rgba(255,255,255,.06) inset}
  .btn:active{transform:translateY(1px)}

  /* Right visual panel (can overflow) */
  .hero-visual{position:relative; height:560px; border-radius:18px; background:
      radial-gradient(140% 140% at 20% 0%, rgba(93,140,200,.16), rgba(0,0,0,0) 60%),
      radial-gradient(140% 140% at 80% 10%, rgba(35,130,255,.12), rgba(0,0,0,0) 62%),
      linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03)), var(--panel);
    border:1px solid rgba(255,255,255,.08);
    backdrop-filter: blur(8px) saturate(140%);
    box-shadow:0 18px 40px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06);
    overflow:visible; /* allow cards to peek outside */
    isolation:isolate;
    transform:translateX(4%); /* tasteful outside offset */
  }
  @media (max-width:1200px){ .hero-visual{transform:none} }

  .viz-stage{position:absolute; inset:0; border-radius:inherit; overflow:hidden}
  .viz-canvas{position:absolute; inset:0}
  .viz-svg{position:absolute; inset:0}
  .legend-tag{position:absolute; left:14px; top:12px; padding:6px 10px; border-radius:999px; font-size:12px;
    background:rgba(230,195,107,.12); color:var(--gold-300); border:1px solid rgba(230,195,107,.25); z-index:2}
  .legend-cap{position:absolute; right:12px; top:12px; font-size:11px; letter-spacing:.2px; color:#cfe2ff; opacity:.9;
    background:rgba(255,255,255,.05); border:1px solid rgba(255,255,255,.08); padding:5px 7px; border-radius:8px; z-index:2}

  /* Lead cards (can sit partly outside) */
  .cards{position:absolute; inset:0; pointer-events:none}
  .lead-card{position:absolute; width:300px; max-width:86%; padding:12px; border-radius:12px;
    background:rgba(12,18,28,.86); border:1px solid rgba(255,255,255,.10);
    box-shadow:0 8px 22px rgba(0,0,0,.28); color:#e8f1fb; pointer-events:auto}
  .lead-card .row{display:flex; justify-content:space-between; align-items:center; gap:10px; margin:3px 0}
  .lead-card .k{font-size:11px; color:#a9bfd6}
  .lead-card .v{font-weight:700; font-size:14px}
  .lead-card .stage{display:inline-flex; align-items:center; gap:6px; font-weight:700; font-size:11px; padding:5px 8px; border-radius:999px; border:1px solid rgba(255,255,255,.14); background:rgba(255,255,255,.06)}
  .chips{display:flex; flex-wrap:wrap; gap:6px; margin-top:4px}
  .chip{font-size:11px; padding:4px 7px; border:1px solid rgba(255,255,255,.12); border-radius:8px; background:rgba(255,255,255,.05)}

  .card-a{left:62%; top:58%}
  .card-b{left:6%;  top:78%; transform:translateX(-28px)} /* peek outside */
  .card-c{left:86%; top:12%; transform:translateX(18px)}  /* peek outside */

  @keyframes floaty{0%,100%{transform:translateY(0)}50%{transform:translateY(-6px)}}
  .lead-card{animation:floaty 6s ease-in-out infinite}

  /* KPI section */
  .section{padding:64px var(--gutter) 96px}
  .section .inner{max-width:var(--container-max); margin:0 auto}
  .section-hd{display:flex; flex-wrap:wrap; align-items:flex-end; gap:12px; justify-content:space-between; margin-bottom:14px}
  .section-hd h2{margin:0; font:600 clamp(22px,3.4vw,30px) "Newsreader", Georgia, serif}
  .sub{color:#8fb2ce; font-size:14px}
  .kpi-wrap{position:relative; border-radius:18px; border:1px solid rgba(255,255,255,.12);
    background:linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.03));
    box-shadow:0 20px 50px rgba(0,0,0,.35), inset 0 1px 0 rgba(255,255,255,.06); padding:22px}
  .kpis{display:grid; grid-template-columns:repeat(4, minmax(0,1fr));}
  @media (max-width:900px){ .kpis{grid-template-columns:repeat(2,1fr)} }
  @media (max-width:520px){ .kpis{grid-template-columns:1fr} }
  .kpi{padding:16px 18px}
  .kpi+.kpi{border-left:1px solid rgba(255,255,255,.06)}
  @media (max-width:900px){ .kpi:nth-child(odd){border-left:none} .kpi:nth-child(n+3){border-top:1px solid rgba(255,255,255,.06)} }
  .kpi .label{font-size:12px; color:#a8bbcd; letter-spacing:.2px; text-transform:uppercase}
  .kpi .num{font-weight:800; font-size:clamp(28px,5vw,42px); line-height:1.05;
    background:linear-gradient(180deg,var(--gold-300),var(--gold-700)); -webkit-background-clip:text; background-clip:text; color:transparent; margin-top:6px}
  .kpi .hint{font-size:12px; color:#8ba6bf; margin-top:6px}

  /* reveal */
  .reveal{opacity:0; transform:translateY(18px); transition:opacity .42s cubic-bezier(.22,.61,.36,1), transform .42s cubic-bezier(.22,.61,.36,1)}
  .reveal.reveal-in{opacity:1; transform:none}
</style>
</head>
<body>
<header class="site-header">
  <div class="inner">
    <a href="index.html" class="brand" aria-label="Home"><span class="brand-badge">G</span></a>
    <nav aria-label="Primary">
      <a class="nav-link" href="#how">How it works</a>
      <a class="nav-link" href="sectors.html">Sectors</a>
      <a class="nav-link" href="pricing.html">Pricing</a>
    </nav>
    <div class="nav-actions">
      <a class="nav-login" href="login.html">Login</a>
      <a class="nav-demo" href="https://www.youtube.com" target="_blank" rel="noopener">Get Demo</a>
      <a class="nav-cta" href="#get-started" id="navStart">Start Free</a>
    </div>
  </div>
</header>

<main>
  <!-- HERO -->
  <section class="hero reveal" aria-label="Hero" data-track="hero">
    <div class="inner">
      <div class="hero-copy">
        <span class="badge" id="copy-badge">Built for packaging suppliers</span>
        <h1 id="copy-h1">Find real packaging buyers.</h1>
        <p class="lead" id="copy-lead">We filter the noise and surface real companies already signaling intent in your strengths.</p>

        <div class="glass-cta" role="group" aria-label="Start for free" id="get-started">
          <label class="visually-hidden" for="heroHost">Your website</label>
          <input id="heroHost" class="glass-input" type="url" inputmode="url" placeholder="yourcompany.com" autocomplete="url">
          <button id="cta-desktop" type="button" class="btn primary">✨ START FOR FREE</button>
        </div>
      </div>

      <!-- RIGHT VISUAL -->
      <aside class="hero-visual" aria-hidden="false">
        <span class="legend-tag" id="legend-domain">yourcompany.com</span>
        <span class="legend-cap" id="legend-cap">Signals clustered by timing</span>
        <div class="viz-stage">
          <!-- Only one of these will be used based on ?viz= -->
          <canvas id="vizCanvas" class="viz-canvas" aria-hidden="true"></canvas>
          <svg id="vizSVG" class="viz-svg" viewBox="0 0 800 560" aria-hidden="true"></svg>
        </div>

        <!-- Floating lead cards (some peek outside panel) -->
        <div class="cards">
          <div class="lead-card card-a">
            <div class="row"><span class="stage" id="c1-stage">Hot 🔥</span><span class="v" id="c1-prob">82%</span></div>
            <div class="row"><span class="k">Buyer</span><span class="v" id="c1-name">Swift Petcare — Raleigh, NC</span></div>
            <div class="row"><span class="k">Distance</span><span class="v" id="c1-dist">5.0 mi</span></div>
            <div class="row"><span class="k">Need</span><span class="v" id="c1-need">Glass jars</span></div>
            <div class="row"><span class="k">AI optimized</span><span class="v" id="c1-ai">87%</span></div>
            <div class="chips">
              <span class="chip" id="c1-chip1">High intent</span>
              <span class="chip" id="c1-chip2">Priority quote</span>
            </div>
          </div>

          <div class="lead-card card-b">
            <div class="row"><span class="stage" id="c2-stage">Warm 🏷️</span><span class="v" id="c2-prob">56%</span></div>
            <div class="row"><span class="k">Buyer</span><span class="v" id="c2-name">Lumina Skincare — Austin, TX</span></div>
            <div class="row"><span class="k">Need</span><span class="v" id="c2-need">Shrink sleeves</span></div>
            <div class="chips">
              <span class="chip" id="c2-chip1">Rising intent</span>
              <span class="chip" id="c2-chip2">Share samples</span>
            </div>
          </div>

          <div class="lead-card card-c">
            <div class="row"><span class="stage" id="c3-stage">Hot+ 🔥</span><span class="v" id="c3-prob">90%</span></div>
            <div class="row"><span class="k">Buyer</span><span class="v" id="c3-name">Northstar Foods — Dallas, TX</span></div>
            <div class="row"><span class="k">Need</span><span class="v" id="c3-need">Stand-up pouches</span></div>
            <div class="chips">
              <span class="chip" id="c3-chip1">Call now</span>
              <span class="chip" id="c3-chip2">Hold calendar</span>
            </div>
          </div>
        </div>
      </aside>
    </div>
  </section>

  <!-- PROOF -->
  <section class="section reveal" id="proof" aria-label="Proof">
    <div class="inner">
      <div class="section-hd">
        <h2>Proof it works</h2>
        <div class="sub">Signals → Verified companies → Hot buyers → Time-to-first buyer</div>
      </div>
      <div class="kpi-wrap">
        <div class="kpis">
          <div class="kpi"><div class="label">Signals captured</div><div class="num" data-to="42000" data-format="int">0</div><div class="hint">From your site + public sources</div></div>
          <div class="kpi"><div class="label">Verified companies</div><div class="num" data-to="1306" data-format="int">0</div><div class="hint">Auto-deduped + enriched</div></div>
          <div class="kpi"><div class="label">Hot buyers this week</div><div class="num" data-to="87" data-format="int">0</div><div class="hint">High-intent fit, ranked</div></div>
          <div class="kpi"><div class="label">Time to first buyer</div><div class="num" data-to="2.3" data-format="dec1">0</div><div class="hint">Days from kickoff to signal</div></div>
        </div>
      </div>
    </div>
  </section>
</main>

<script>
/* --------- Copy & knobs --------- */
const COPY = {
  badge: 'Built for packaging suppliers',
  h1: 'Find real packaging buyers.',
  lead: 'We filter the noise and surface real companies already signaling intent in your strengths.',
  probLabel: 'Win rate',
  domain: 'yourcompany.com'
};
const pools = {
  buyers:[
    {name:"Pioneer Homecare",city:"Boise, ID"},
    {name:"Swift Petcare",city:"Raleigh, NC"},
    {name:"Acme Drinks Co.",city:"Chicago, IL"},
    {name:"Northstar Foods",city:"Dallas, TX"},
    {name:"Everpack Industrial",city:"Cleveland, OH"},
    {name:"Atlas Beauty",city:"Toronto, ON"},
    {name:"Lumina Skincare",city:"Austin, TX"},
    {name:"Volt Pharma",city:"Denver, CO"}
  ],
  needs:["PET bottles","Stand-up pouches","Rigid boxes","Corrugated prints · 5k MOQ","Mailer boxes","Shrink sleeves","Paper labels","Glass jars","Pulp trays","Poly mailers"],
  chipsHot:["High intent","Priority quote","Send samples","Quote now"],
  chipsWarm:["Rising intent","Share case study","Add to sequence","Qualify on call"]
};

/* --------- Helpers --------- */
const $ = (q)=>document.querySelector(q);
const $$ = (q)=>Array.from(document.querySelectorAll(q));
const getParam = (k)=>new URLSearchParams(location.search).get(k)||'';
const clamp=(v,a,b)=>Math.max(a,Math.min(b,v));
const pick=(a)=>a[(Math.random()*a.length)|0];

/* --------- Apply copy --------- */
$('#copy-badge').textContent = COPY.badge;
$('#copy-h1').textContent = COPY.h1;
$('#copy-lead').textContent = COPY.lead;
$('#legend-domain').textContent = COPY.domain;

/* --------- CTA routing --------- */
const normHost = (h)=>(h||"").trim().toLowerCase().replace(/^https?:\/\//,"").replace(/^www\./,"").replace(/\/.*$/,"");
function goStart(){
  const raw = $('#heroHost')?.value?.trim() || '';
  const h = normHost(raw);
  const url = h ? `start.html?host=${encodeURIComponent(h)}` : `start.html`;
  location.href = url;
}
$('#cta-desktop').addEventListener('click', goStart);
$('#navStart').addEventListener('click', (e)=>{e.preventDefault(); goStart();});

/* --------- Reveal on view --------- */
(function(){
  if(!('IntersectionObserver' in window)){
    $$('.reveal').forEach(el=>el.classList.add('reveal-in'));
    return;
  }
  const io = new IntersectionObserver((es)=>{
    es.forEach(e=>{ if(e.isIntersecting) e.target.classList.add('reveal-in'); });
  },{threshold:.25});
  $$('.reveal').forEach(el=>io.observe(el));
})();

/* --------- KPI counters --------- */
(function(){
  const section = document.getElementById("proof"); if (!section) return;
  const noMotion = matchMedia && matchMedia("(prefers-reduced-motion: reduce)").matches;
  const nums = [...section.querySelectorAll(".num")]; let fired=false;
  function fmt(v, f){ if(f==="dec1") return v.toFixed(1); return Math.round(v).toString().replace(/\B(?=(\d{3})+(?!\d))/g, ","); }
  function animate(el){
    const to = parseFloat(el.dataset.to||"0"); const f = el.dataset.format||"int";
    if(noMotion){ el.textContent = fmt(to,f); return; }
    const dur=1200, t0=performance.now();
    function tick(now){ const p=Math.min(1,(now-t0)/dur); const ease=1-Math.pow(1-p,3); el.textContent=fmt(to*ease,f); if(p<1) requestAnimationFrame(tick); }
    requestAnimationFrame(tick);
  }
  const io=new IntersectionObserver((es)=>{ es.forEach(e=>{ if(!fired && e.isIntersecting){ fired=true; nums.forEach(animate); io.disconnect(); }}); },{threshold:.35});
  io.observe(section);
  addEventListener('load',()=>{ if(!fired){ fired=true; nums.forEach(animate); }});
})();

/* --------- Visuals (radar / constellation / bokeh) --------- */
const viz = (getParam('viz')||'radar').toLowerCase(); // 'radar' | 'const' | 'bokeh'
const svg = document.getElementById('vizSVG');
const canvas = document.getElementById('vizCanvas');
const ctx = canvas.getContext?.('2d');

function sizeCanvas(){
  if(!canvas) return;
  const r = svg.parentElement.getBoundingClientRect();
  const DPR = Math.max(1, Math.min(1.5, devicePixelRatio||1));
  canvas.width = (r.width*DPR)|0;
  canvas.height= (r.height*DPR)|0;
  canvas.style.width = r.width+'px';
  canvas.style.height= r.height+'px';
  ctx && ctx.setTransform(DPR,0,0,DPR,0,0);
}

/* --- Constellation (canvas) --- */
function drawConstellation(){
  sizeCanvas(); if(!ctx) return;
  const r=canvas.getBoundingClientRect(); const W=r.width, H=r.height;
  ctx.clearRect(0,0,W,H);
  const N=18, linkR=96; const pts=[];
  for(let i=0;i<N;i++){ pts.push({x:(0.18+Math.random()*0.78)*W, y:(0.10+Math.random()*0.82)*H}); }
  ctx.lineWidth=1;
  for(let i=0;i<N;i++) for(let j=i+1;j<N;j++){
    const a=pts[i], b=pts[j], dx=a.x-b.x, dy=a.y-b.y, d2=dx*dx+dy*dy;
    if(d2<linkR*linkR){
      const aLine=.04+.14*(1-Math.sqrt(d2)/linkR);
      ctx.strokeStyle=`rgba(230,195,107,${aLine})`;
      ctx.beginPath(); ctx.moveTo(a.x,a.y); ctx.lineTo(b.x,b.y); ctx.stroke();
    }
  }
  for(const p of pts){ ctx.fillStyle="rgba(242,220,160,0.85)"; ctx.beginPath(); ctx.arc(p.x,p.y,1.6,0,Math.PI*2); ctx.fill(); }
  ctx.fillStyle="rgba(242,220,160,0.95)"; ctx.beginPath(); ctx.arc(W*0.22,H*0.58,3.6,0,Math.PI*2); ctx.fill();
}

/* --- Bokeh (canvas) --- */
function drawBokeh(){
  sizeCanvas(); if(!ctx) return;
  const r=canvas.getBoundingClientRect(); const W=r.width, H=r.height;
  ctx.clearRect(0,0,W,H);
  const grd=ctx.createRadialGradient(W*0.5,H*0.4,10, W*0.5,H*0.4, Math.max(W,H)*0.9);
  grd.addColorStop(0, 'rgba(255,255,255,0.03)'); grd.addColorStop(1, 'rgba(0,0,0,0)');
  ctx.fillStyle=grd; ctx.fillRect(0,0,W,H);
  for(let i=0;i<18;i++){
    const x=(0.12+Math.random()*0.80)*W, y=(0.12+Math.random()*0.76)*H, r0=12+Math.random()*42;
    const g=ctx.createRadialGradient(x,y,0, x,y,r0); const a=0.06+Math.random()*0.10;
    g.addColorStop(0, `rgba(242,220,160,${a+0.05})`); g.addColorStop(0.6,`rgba(230,195,107,${a})`); g.addColorStop(1,'rgba(0,0,0,0)');
    ctx.fillStyle=g; ctx.beginPath(); ctx.arc(x,y,r0,0,Math.PI*2); ctx.fill();
  }
}

/* --- Lead Radar (SVG) --- */
function drawRadar(){
  if(!svg) return; svg.innerHTML='';
  const W = svg.viewBox.baseVal.width || 800, H = svg.viewBox.baseVal.height || 560;
  // defs: glow
  const defs = document.createElementNS('http://www.w3.org/2000/svg','defs');
  const glow = document.createElementNS(defs.namespaceURI,'filter'); glow.id='g';
  glow.innerHTML = `<feGaussianBlur stdDeviation="4" result="b"/><feMerge><feMergeNode in="b"/><feMergeNode in="SourceGraphic"/></feMerge>`;
  defs.appendChild(glow);
  svg.appendChild(defs);

  // soft vignette base
  const bg = document.createElementNS(svg.namespaceURI,'rect');
  bg.setAttribute('x','0'); bg.setAttribute('y','0'); bg.setAttribute('width',W); bg.setAttribute('height',H);
  bg.setAttribute('fill','url(#grad-base)');
  // radial gradient
  const gdefs = document.createElementNS(svg.namespaceURI,'defs');
  const rg = document.createElementNS(svg.namespaceURI,'radialGradient'); rg.id='grad-base';
  rg.setAttribute('cx','48%'); rg.setAttribute('cy','55%'); rg.setAttribute('r','70%');
  rg.innerHTML = `<stop offset="0%" stop-color="rgba(255,255,255,.02)"/><stop offset="100%" stop-color="rgba(0,0,0,0)"/>`;
  gdefs.appendChild(rg); svg.appendChild(gdefs); svg.appendChild(bg);

  // rings
  const cx=W*0.34, cy=H*0.60;
  const rings = [70, 130, 190, 250];
  rings.forEach((r,i)=>{
    const c = document.createElementNS(svg.namespaceURI,'circle');
    c.setAttribute('cx',cx); c.setAttribute('cy',cy); c.setAttribute('r',r);
    c.setAttribute('fill','none'); c.setAttribute('stroke','rgba(230,195,107,'+(0.08+i*0.02)+')');
    c.setAttribute('stroke-dasharray','2 6');
    svg.appendChild(c);
  });

  // sweep
  const sweep = document.createElementNS(svg.namespaceURI,'path');
  sweep.setAttribute('fill','url(#sweepGrad)');
  const sdefs = document.createElementNS(svg.namespaceURI,'defs');
  const sg = document.createElementNS(svg.namespaceURI,'radialGradient'); sg.id='sweepGrad';
  sg.setAttribute('cx','0%'); sg.setAttribute('cy','0%');
  sg.innerHTML = `<stop offset="0%" stop-color="rgba(242,220,160,.18)"/><stop offset="100%" stop-color="rgba(242,220,160,0)"/>`;
  sdefs.appendChild(sg); svg.appendChild(sdefs);
  function arcPath(a0,a1,r){ const p0={x:cx+r*Math.cos(a0), y:cy+r*Math.sin(a0)}, p1={x:cx+r*Math.cos(a1), y:cy*Math.sin?cy+r*Math.sin(a1):cy+r*Math.sin(a1)};
    return `M ${cx},${cy} L ${p0.x},${p0.y} A ${r},${r} 0 0 1 ${p1.x},${p1.y} Z`; }
  sweep.setAttribute('d', arcPath(-.25, .25, 260));
  sweep.setAttribute('filter','url(#g)');
  svg.appendChild(sweep);

  // anchor (glowing)
  const anchor = document.createElementNS(svg.namespaceURI,'circle');
  anchor.setAttribute('cx',cx); anchor.setAttribute('cy',cy); anchor.setAttribute('r',10);
  anchor.setAttribute('fill','rgba(242,220,160,.95)'); anchor.setAttribute('filter','url(#g)');
  svg.appendChild(anchor);

  // nodes + links
  const nodes = Array.from({length:12},(_,i)=>({
    x: cx + (120+Math.random()*220)*Math.cos(Math.random()*Math.PI*2),
    y: cy + (120+Math.random()*220)*Math.sin(Math.random()*Math.PI*2)
  }));
  nodes.forEach(n=>{
    const l = document.createElementNS(svg.namespaceURI,'line');
    l.setAttribute('x1',cx); l.setAttribute('y1',cy);
    l.setAttribute('x2',n.x); l.setAttribute('y2',n.y);
    l.setAttribute('stroke','rgba(230,195,107,.07)');
    svg.appendChild(l);
    const c = document.createElementNS(svg.namespaceURI,'circle');
    c.setAttribute('cx',n.x); c.setAttribute('cy',n.y); c.setAttribute('r',2.2);
    c.setAttribute('fill','rgba(242,220,160,.85)'); c.setAttribute('filter','url(#g)');
    svg.appendChild(c);
  });

  // animate sweep
  let t0 = performance.now();
  function tick(now){
    const t=(now-t0)/2400; const a = (t%1)*Math.PI*2;
    sweep.setAttribute('transform',`rotate(${a*180/Math.PI} ${cx} ${cy})`);
    requestAnimationFrame(tick);
  }
  requestAnimationFrame(tick);
}

/* Decide which visual to show */
function paintVisual(){
  if(viz==='const'){ svg.style.display='none'; canvas.style.display='block'; drawConstellation(); }
  else if(viz==='bokeh'){ svg.style.display='none'; canvas.style.display='block'; drawBokeh(); }
  else { canvas.style.display='none'; svg.style.display='block'; drawRadar(); }
}
addEventListener('resize', ()=>{ if(viz!=='radar'){ sizeCanvas(); if(viz==='const') drawConstellation(); else drawBokeh(); }});
paintVisual();

/* --------- Rotate lead card data --------- */
(function(){
  const stages = [
    {label:'Warm 🏷️', chips: pools.chipsWarm, p:[48,58]},
    {label:'Hot 🔥',  chips: pools.chipsHot,  p:[65,80]},
    {label:'Hot+ 🔥', chips: pools.chipsHot,  p:[80,92]}
  ];
  const cards = [
    {stage:'#c1-stage', prob:'#c1-prob', name:'#c1-name', need:'#c1-need', ai:'#c1-ai', c1:'#c1-chip1', c2:'#c1-chip2'},
    {stage:'#c2-stage', prob:'#c2-prob', name:'#c2-name', need:'#c2-need', c1:'#c2-chip1', c2:'#c2-chip2'},
    {stage:'#c3-stage', prob:'#c3-prob', name:'#c3-name', need:'#c3-need', c1:'#c3-chip1', c2:'#c3-chip2'}
  ];
  function randBetween([a,b]){ return Math.round(a + Math.random()*(b-a)); }
  function updateCard(card, stageIdx){
    const buyer = pick(pools.buyers), need = pick(pools.needs), st = stages[stageIdx%stages.length];
    const prob = randBetween(st.p);
    const q = (sel)=>document.querySelector(sel);
    q(card.stage).textContent = st.label;
    if(card.ai) q(card.ai).textContent = (prob+5)+'%';
    q(card.prob).textContent = prob+'%';
    q(card.name).textContent = `${buyer.name} — ${buyer.city}`;
    q(card.need).textContent = need;
    q(card.c1).textContent = pick(st.chips);
    q(card.c2).textContent = pick(st.chips);
  }
  cards.forEach((c,i)=>updateCard(c,i));
  let k=0;
  setInterval(()=>{ k++; cards.forEach((c,i)=>updateCard(c,i+k)); }, 5200);
})();

/* JS ready → remove no-js */
document.documentElement.classList.remove('no-js');
</script>
</body>
</html>