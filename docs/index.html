<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galactly — Packaging Buyers Finder</title>
  <style>
    :root{
      --bg:#0b0f14; --panel:#0f1621; --muted:#7d8aa0; --text:#eaf1ff; --brand:#67d2ff; --accent:#8be0a3; --warn:#ffcc66;
      --stroke:#1f2a3b; --card:#101827; --chip:#132033; --btn:#18263a; --btnH:#1e2f49;
    }
    *{box-sizing:border-box}
    html,body{height:100%}
    body{margin:0;font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,Helvetica,Arial,sans-serif;background:radial-gradient(1200px 800px at 10% 0%, #0f1a2b 0%, #0b0f14 50%, #0b0f14 100%);color:var(--text)}
    header{display:flex;justify-content:space-between;align-items:center;padding:14px 18px;border-bottom:1px solid var(--stroke);backdrop-filter:saturate(120%) blur(6px)}
    .brand{display:flex;gap:10px;align-items:center}
    .brand b{font-weight:700}
    .wrap{max-width:1200px;margin:0 auto;padding:42px 18px}
    .hero{display:grid;grid-template-columns:1.1fr 1fr;gap:32px;align-items:center}
    .h1{font-size:60px;line-height:1.02;margin:0 0 12px}
    .h1 .hl{color:#7cd1ff}
    .p{color:var(--muted);font-size:16px;line-height:1.5;margin:10px 0 22px}
    .ctaRow{display:flex;gap:12px;flex-wrap:wrap;margin-top:18px}
    .btn{background:var(--btn);border:1px solid var(--stroke);color:var(--text);padding:12px 16px;border-radius:12px;cursor:pointer;font-weight:600}
    .btn.primary{background:linear-gradient(180deg,#1f3d5f,#18263a);border-color:#2b4668}
    .btn:hover{background:var(--btnH)}
    .fakeviz{background:var(--card);border:1px solid var(--stroke);border-radius:16px;min-height:340px;position:relative;box-shadow:0 10px 40px rgba(0,0,0,.35)}
    .fakeviz:before{content:"";position:absolute;inset:0;border-radius:16px;background:radial-gradient(600px 320px at 30% 50%, rgba(103,210,255,.15), transparent 60%), radial-gradient(400px 260px at 80% 30%, rgba(139,224,163,.1), transparent 60%)}
    .badges{display:flex;gap:10px;flex-wrap:wrap;margin-top:10px}
    .badge{font-size:12px;color:#c8d7f0;border:1px dashed #2b3b55;padding:6px 10px;border-radius:999px;background:#0d1524}

    /* Modal */
    .modal{position:fixed;inset:0;display:none;place-items:center;background:rgba(3,8,14,.55);backdrop-filter:blur(6px);z-index:50}
    .modal.show{display:grid}
    .panel{width:min(800px,94vw);background:var(--panel);border:1px solid var(--stroke);border-radius:16px;padding:18px;box-shadow:0 20px 60px rgba(0,0,0,.45)}
    .panel h2{margin:6px 0 2px}
    .sub{color:#a8b4c9;font-size:13px;margin-bottom:14px}
    .row{display:grid;grid-template-columns:1fr 1fr;gap:14px}
    label{display:block;font-size:13px;color:#9fb3d4;margin:10px 0 6px}
    input,textarea{width:100%;padding:10px 12px;border-radius:10px;border:1px solid #25344a;background:#0d1524;color:#e9f1ff}
    textarea{min-height:84px;resize:vertical}
    .chips{display:flex;flex-wrap:wrap;gap:8px}
    .chip{background:var(--chip);border:1px solid var(--stroke);padding:6px 10px;border-radius:999px;cursor:pointer}
    .chip.active{outline:1px solid #3f7ddb;background:#162538}
    .foot{display:flex;justify-content:space-between;align-items:center;margin-top:16px}
    .muted{color:#90a3bf;font-size:12px}
  </style>
</head>
<body>
  <header>
    <div class="brand"><span style="width:8px;height:8px;border-radius:50%;background:#6ef3a3;display:inline-block"></span><b>Galactly</b></div>
    <div style="display:flex;gap:8px;align-items:center">
      <small style="color:#9db3d3">API</small>
      <input id="apiBase" style="width:360px" placeholder="https://<your-nf>.app" />
      <button class="btn" id="saveApi">Save</button>
    </div>
  </header>

  <main class="wrap">
    <section class="hero">
      <div>
        <h1 class="h1">Find US & Canada <span class="hl">Packaging</span> Buyers in <span class="hl">&lt;30s</span></h1>
        <p class="p">Real posts & tenders from public feeds. Free viewer; paid verifications & automations. Built for packaging owners & sales teams. No coding. Just clicks.</p>
        <div class="ctaRow">
          <button class="btn primary" id="startFree">Start free</button>
          <a class="btn" href="free-panel.html">Open live feed</a>
        </div>
        <div class="badges">
          <div class="badge">Live leads</div>
          <div class="badge">Press & hold to reveal</div>
          <div class="badge">US & CA focus</div>
        </div>
      </div>
      <div class="fakeviz"></div>
    </section>
  </main>

  <!-- Onboarding Modal -->
  <div class="modal" id="obModal" aria-hidden="true">
    <div class="panel">
      <div style="display:flex;justify-content:space-between;align-items:center">
        <div>
          <h2>Tell us who you sell to</h2>
          <div class="sub">Pick one: use <b>your website</b> (we infer ICP) or paste a few <b>example buyers</b>.</div>
        </div>
        <button class="btn" id="obClose">✕</button>
      </div>

      <div class="row">
        <div>
          <label>Option A — Your website (we infer ICP)</label>
          <input id="vendorSite" placeholder="https://yourcompany.com" />
          <small class="muted">We only read public pages to guess industries, regions and examples.</small>
        </div>
        <div>
          <label>Option B — Example buyers (comma‑separated domains)</label>
          <textarea id="seedBuyers" placeholder="liquiddeath.com, soylent.com"></textarea>
          <small class="muted">Paste 1–10 domains. We’ll expand from these.</small>
        </div>
      </div>

      <div class="row" style="margin-top:8px">
        <div>
          <label>Industries (comma list)</label>
          <input id="industries" placeholder="beverage, confectionery, cosmetics" />
        </div>
        <div>
          <label>Regions</label>
          <div class="chips">
            <span class="chip active" data-region="US">US</span>
            <span class="chip" data-region="CA">CA</span>
          </div>
        </div>
      </div>

      <div class="foot">
        <div class="muted">We’ll save your prefs locally. You can change API base in the header.</div>
        <div style="display:flex;gap:8px">
          <button class="btn" id="testScan">Scan & go to feed</button>
        </div>
      </div>
    </div>
  </div>

<script>
// ========== tiny API base helper ==========
(function(){
  const DEFAULT = localStorage.getItem('api_base_default') || '';
  const q = new URLSearchParams(location.search);
  let base = q.get('api') || localStorage.getItem('api_base') || DEFAULT;
  function normalize(v){ if(!v) return ''; v = String(v).trim().replace(/\/+$/,''); if(v && !/^https?:\/\//i.test(v)) v = 'https://' + v; return v; }
  base = normalize(base);
  if(base) { window.API_BASE = base; }
  const input = document.getElementById('apiBase'); if(input){ input.value = base; }
  document.getElementById('saveApi').onclick = ()=>{ const v = normalize(input.value); window.API_BASE = v; try{ localStorage.setItem('api_base', v); }catch{} alert('Saved API base.'); };
})();

function API(p){ const b = window.API_BASE || (document.getElementById('apiBase')?.value||''); return (b||'').replace(/\/$/,'') + p; }
const uidKey='gal_uid'; let UID = localStorage.getItem(uidKey); if(!UID){ UID = 'u-' + Math.random().toString(36).slice(2); localStorage.setItem(uidKey, UID); }

// Modal wiring
const modal = document.getElementById('obModal');
const startBtn = document.getElementById('startFree');
const closeBtn = document.getElementById('obClose');
startBtn.onclick = ()=> modal.classList.add('show');
closeBtn.onclick = ()=> modal.classList.remove('show');
modal.addEventListener('click', (e)=>{ if(e.target === modal) modal.classList.remove('show'); });

// Region chip toggles
for (const chip of document.querySelectorAll('.chip[data-region]')){
  chip.addEventListener('click', ()=> chip.classList.toggle('active'));
}

// Submit => gate + find-now + redirect
async function gate(body){ try{ const r = await fetch(API('/api/v1/gate'), { method:'POST', headers:{'content-type':'application/json','x-galactly-user':UID}, body: JSON.stringify(body)}); return await r.json(); }catch(e){ return null; } }
async function findNow(payload){ try{ const r = await fetch(API('/api/v1/find-now'), { method:'POST', headers:{'content-type':'application/json','x-galactly-user':UID}, body: JSON.stringify(payload)}); return await r.json(); }catch(e){ return null; } }

function parseList(s){ return (s||'').split(/[,\n]/).map(x=>x.trim()).filter(Boolean); }

async function runAndGo(){
  const vendorDomain = document.getElementById('vendorSite').value.trim();
  const buyers = parseList(document.getElementById('seedBuyers').value);
  const industries = parseList(document.getElementById('industries').value);
  const regions = Array.from(document.querySelectorAll('.chip[data-region].active')).map(el=>el.getAttribute('data-region'));

  const profile = { vendorDomain: vendorDomain || undefined, buyers, industries, regions };
  try{ localStorage.setItem('gal_profile', JSON.stringify(profile)); }catch{}

  // gate
  await gate({ region: regions[0]||'US', email: null, alerts: false });
  // find-now (fire & forget; feed will still open if API is slow)
  findNow(profile).finally(()=>{ location.href = 'free-panel.html'; });
}

document.getElementById('testScan').onclick = runAndGo;

</script>
</body>
</html>
