/* docs/sections/process/process.css */
/* Section 3 – Process (V2: numbers-only stepper → dock left, board reveals) */

:root{
  --proc-gap: 24px;
  --proc-panel: rgba(12,18,28,.72);
  --proc-stroke: rgba(255,255,255,.08);
  --proc-soft: rgba(255,255,255,.04);
  --proc-chip: rgba(14,22,34,.85);
  --gold-300: #f2dca0;
  --gold-700: #b8913d;
}

.procV2{position:relative; padding:86px 16px 90px; overflow:hidden}
.procV2 .inner{max-width:1140px; margin:0 auto; position:relative}

/* Head */
.procV2 .hd{margin-bottom:16px}
.procV2 h2{margin:0; font:600 clamp(22px,3.4vw,30px) "Newsreader", Georgia, serif}
.procV2 .sub{color:#9fb4c8; font-size:14px}

/* Layout shells */
.procV2 .stage{
  position:relative;
  display:grid;
  grid-template-columns: 1fr 420px; /* board | rail */
  gap: var(--proc-gap);
  min-height: 540px;
}

/* ============== INTRO MODE (numbers only) ============== */
.procV2.mode-intro .stage{
  grid-template-columns: 1fr;
}
.procV2.mode-intro .board{
  opacity:0; transform:translateX(24px) scale(.98);
  filter:saturate(.9); pointer-events:none;
}
.procV2.mode-intro .rail{
  justify-self:center;
  width:min(460px, 92vw);
}

/* ============== OVERVIEW/DOCKED MODE ============== */
.procV2.mode-overview .board{
  opacity:1; transform:none; filter:none; pointer-events:auto;
  transition:opacity .35s ease, transform .35s ease, filter .35s ease;
}
.procV2 .rail{
  position:relative; align-self:center;
  display:grid; grid-auto-rows: min-content;
  gap:16px;
}

/* Stepper (numbers only) */
.stepper{
  border:1px solid var(--proc-stroke);
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.01));
  border-radius:16px; padding:18px 16px;
  backdrop-filter: blur(6px);
  box-shadow:0 10px 30px rgba(0,0,0,.25);
}
.stepper ol{list-style:none; margin:0; padding:0; display:flex; flex-direction:column; align-items:center; gap:12px}
.stepper .dot{
  width:36px; height:36px; border-radius:999px; display:grid; place-items:center;
  font-weight:700; color:#dbe7f4;
  background:linear-gradient(180deg, #263449, #1b2736);
  border:1px solid var(--proc-stroke);
  box-shadow:0 6px 18px rgba(0,0,0,.28), 0 0 0 1px rgba(255,255,255,.03) inset;
  transition:transform .18s ease, box-shadow .18s ease, background .18s ease;
}
.stepper .dot:is(:hover,:focus-visible){transform:translateY(-1px)}
.stepper .dot.is-active{
  color:#1b1405;
  background:linear-gradient(180deg, var(--gold-300), var(--gold-700));
  box-shadow:0 10px 26px rgba(230,195,107,.25), 0 0 0 1px rgba(255,255,255,.06) inset;
}
.stepper .dot.is-done{
  background:linear-gradient(180deg, #30445c, #24364b);
  color:#b9cbe0;
  position:relative;
}
.stepper .dot.is-done::after{
  content:"✓"; position:absolute; inset:0; display:grid; place-items:center; font-weight:800; font-size:16px;
}

/* Stepper controls */
.stepper-ctrls{margin-top:14px; display:flex; gap:10px; justify-content:center; flex-wrap:wrap}
.stepper-ctrls .btn{
  padding:10px 14px; border-radius:999px; font-weight:700; border:1px solid var(--proc-stroke); cursor:pointer;
  background:linear-gradient(180deg,#122030,#0d1826); color:#cfe0ee;
}
.stepper-ctrls .btn.primary{
  color:#1b1405; border:none;
  background:linear-gradient(180deg, var(--gold-300), var(--gold-700));
  box-shadow:0 10px 30px rgba(230,195,107,.20), 0 0 0 1px rgba(255,255,255,.06) inset;
}
.stepper-ctrls .btn:active{transform:translateY(1px)}

/* Rail notes (appear only after dock) */
.rail-notes{border-left:1px solid var(--proc-stroke); padding-left:16px; margin-left:6px; display:grid; gap:16px}
.rail-notes .note h4{margin:0 0 4px; font-weight:800}
.rail-notes .note p{margin:0; color:#99b0c8; font-size:14px}
.procV2.mode-intro .rail-notes{display:none}

/* Board (the workflow cards) */
.board{
  position:relative;
  border-radius:16px;
  background:linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.015));
  border:1px solid var(--proc-stroke);
  padding:16px;
  min-height:520px;
  box-shadow:0 14px 40px rgba(0,0,0,.35);
  transition:opacity .2s ease, transform .2s ease;
}

/* Lanes (columns) */
.lanes{
  display:grid;
  grid-template-columns: repeat(2, minmax(0,1fr));
  gap:16px;
}
@media (min-width: 980px){
  .lanes{ grid-template-columns: repeat(4, minmax(0,1fr)); }
}

.lane{
  background:var(--proc-panel);
  border:1px solid var(--proc-stroke);
  border-radius:14px; padding:12px; position:relative;
  box-shadow:0 10px 30px rgba(0,0,0,.28);
  transition:filter .25s ease, transform .25s ease, box-shadow .25s ease;
}
.lane.is-dim{filter:saturate(.75) brightness(.9)}
.lane.is-focus{
  transform:translateY(-2px);
  box-shadow:0 16px 38px rgba(0,0,0,.35), 0 0 0 1px rgba(242,220,160,.22) inset;
}

.lane-hd{
  display:flex; align-items:center; gap:8px; margin-bottom:10px;
  font-weight:800; color:#d7e6f5;
}
.lane-hd .tag{padding:4px 8px; border-radius:999px; font-size:12px;
  background:rgba(255,255,255,.06); border:1px solid var(--proc-stroke)}

/* Chips (nodes) */
.chips{display:grid; gap:10px}
.chip{
  display:flex; align-items:center; gap:8px;
  padding:10px 12px; border-radius:12px;
  background:var(--proc-chip);
  border:1px solid var(--proc-stroke);
  color:#cfe0ee; font-weight:600;
  box-shadow:0 6px 18px rgba(0,0,0,.28);
}
.chip .ico{opacity:.9}

/* Result card */
.result{
  grid-column: 1 / -1;
  background:linear-gradient(180deg, rgba(14,22,34,.92), rgba(14,22,34,.88));
  border:1px solid var(--proc-stroke);
  border-radius:14px; padding:12px;
}
.result h4{margin:0 0 6px; font-weight:800}
.result ul{margin:0; padding-left:18px; color:#9fb2c6}

/* Sticky helper (used when docked) */
.procV2 .rail .sentinel{position:sticky; top:96px}

/* ======= Responsive (≤ 900px): stack, show everything vertically ======= */
@media (max-width: 900px){
  .procV2{padding:60px 14px 70px}
  .procV2 .stage{grid-template-columns: 1fr; gap:16px}
  .procV2 .rail{justify-self:stretch}
  .stepper ol{flex-direction:row; justify-content:center; flex-wrap:wrap}
  .rail-notes{display:none}
  .board{min-height: auto}
  .lanes{grid-template-columns: 1fr}
}

/* Reduced motion */
@media (prefers-reduced-motion: reduce){
  .procV2 *{transition:none !important; animation:none !important}
}